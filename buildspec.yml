version: 0.2

phases:
  install:
    runtime-versions:
      docker: 18
  pre_build:
    commands:
      - echo Logging in to Amazon ECR...
      - docker login -u AWS -p eyJwYXlsb2FkIjoicXdVbHhVNFR0eDlnMmFhS2NpUnllZzZ2SUJtcklWSmRkOVA1L1QvYnRhbXBTRDBWZzhXczZVNEVweGV4c0twZ3hHcjBxRWZsZTdEbWg0YkwwT1BDVFE3di9HUlMwZnRuR2lLQVA2aDUzUVN4NHNvN2Z3OG1KWW15TE1MNDdHcTR4TnB6a0tGeEdHb2hlcTVvcjhyblQyQUhjOGoxb3FuU3JOcTEwZCtUd1hBaXRKK0VsMHZEdVpwVmpKRTJSZ0dvc01jUDRCMVJ5dFdOL3R6dURtcEE1TnNaQmY1Z3E1WWRLcGowRU5YOXdnNzFIVUcxaHBsWjlDZUhBdE5qa0l1b0I5VU85SFVRUEN2c3lJTDA4QmlrRkVjTWtmb2cxM0VLeDRCaWZTWnZEOTQ3YjFHaTJDVExaeWJUSUhTS3B2bHNPSkF5a1dHWHZrOWlNdnlwbDFPVHU5YnFCY1BudS96T2lrcGJ3Y1pTcGlxNm05Z2YzdHBzOHo4QW5KZkxuaFJOMkwzOW1oMVdJZzNRZTRUbjlSeXVBR0RsK0ptay9IdGdyZzFXSk1PbHVtRFFkVEtNU0k4bGtKdDZBVCswZ1oxWlR1dy9OS3dVNk9laHlKRVgvMEtTZGY5QjZKbzBZcDZJV0Q5cE5zcnB2NlZqcWZDbmd1SWYzZXNZWWNOVmhoVmVQbjhWcHpaa3pIenFwTTFoSjJxUzd4WTA5V2NBZnBIcGV6Ri9pS1AxWXVqTDVhZWx5emhnT3U0UGh3VDJoQ1pjWEtMNmxBMnBmTWFhblNkNnVQd29zSm1NT1VjajhCV0tIb21rVTVPbFV1THRMKzhIRzdQclc1SWQ1OUg4cVdOeUhGZm8vT0tyM0dKTVlHVUt3UWdUUUxaWVUyTFJvYXJVM3VPYkt0eVlvVTc3dWJBVGJOdVlIRjN6aCs3bXh3QlFJeGV5R3JIb2VOUTBkeFVzUXcrVXNjemlpWGFJeUJBd2hTaGd1bkd4YXhrSU1TUXVtbHNXdVNxUlYycnJRRnFwTUwzZVpPWHViN3phKzIxcXkwUy9sT1ZqcUkrSk02N0R6TnZnRG9MWVJUQjREb1Qxb0o3b0V6bmZSdEdFcXZNTkdqOGxsZ1pWdWx2SlU5Y1hsV25xZjF1Y1lIb3hUaVJUOGRDcGVDZ1pjVG40Vk5JdkVnQUdadjFuSUlXb0JTUjI5Rk1PYmZaRmhvTE5Sb055dkdOMWlCQUVKT05QYmF1dllXR01OTGVock1UaFFkR2pIMHVKU1BkaEdnWHF4d21NWGpYWnl3Vnd1QXVDbXBYcXExK0V3OExmMVF3MFNOMUdSU2FncmJ5aGdYL0k2eXo1ZXIveTNFWE1vYXYveE1oWlNuQ2ZqT1hqNUQ0RStKMnZBRTNkWmVLSkpMNFN5VzVaSy84eTdOV0xEemc5NCt1am9oeW13YmJ1VVBERVh5ZVJZdnBRaEwrMyIsImRhdGFrZXkiOiJBUUVCQUhod20wWWFJU0plUnRKbTVuMUc2dXFlZWtYdW9YWFBlNVVGY2U5UnE4LzE0d0FBQUg0d2ZBWUpLb1pJaHZjTkFRY0dvRzh3YlFJQkFEQm9CZ2txaGtpRzl3MEJCd0V3SGdZSllJWklBV1VEQkFFdU1CRUVEQU9nVC9vZkcwTnJIMWlzT0FJQkVJQTdDVVo3OTUxTWpqbk1vbEFXRU9wVXY5b0F2eTMwejBzMTd3ZUlKVmhVelduUCtnRWVBNVo0dnlPMjBWbWhQZ1RSRFdSN253cTRYNHo5MVBvPSIsInZlcnNpb24iOiIyIiwidHlwZSI6IkRBVEFfS0VZIiwiZXhwaXJhdGlvbiI6MTU2Nzg4NTE4Mn0= https://737600544206.dkr.ecr.us-east-1.amazonaws.com
  build:
    commands:
      - echo Build started on `date`
      - echo Building the Docker image...          
      - docker build -t glcapstoneairpg .
      - docker tag glcapstoneairpg:latest 223998089108.dkr.ecr.us-east-1.amazonaws.com/glcapstoneairpg:latest     
  post_build:
    commands:
      - echo Build completed on `date`
      - echo Pushing the Docker image...
      - docker push 223998089108.dkr.ecr.us-east-1.amazonaws.com/glcapstoneairpg:latest